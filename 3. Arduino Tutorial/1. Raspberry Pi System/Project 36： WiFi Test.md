### Project 36: WiFi Test

1.  **Introduction**

In this project, we first use the WiFi station mode of ESP32 to read the
IP address of WiFi, and then connect WiFi via App to read the characters
sent by each function button on App.

**2.Components**

<table>
<tbody>
<tr class="odd">
<td><img src="https://raw.githubusercontent.com/keyestudio/KS5011-KS5011F-Keyestudio-ESP32-Learning-Kit-Complete-Edition-Raspberry-Pi/master/media/729232b0c2d2c01984808289b222890c.png" style="width:1.8125in;height:0.86458in" /></td>
<td><img src="https://raw.githubusercontent.com/keyestudio/KS5011-KS5011F-Keyestudio-ESP32-Learning-Kit-Complete-Edition-Raspberry-Pi/master/media/27f4c7f6c0855000ba007934d00c4a79.jpeg" style="width:2.43681in;height:1.13472in" /></td>
<td><img src="https://raw.githubusercontent.com/keyestudio/KS5011-KS5011F-Keyestudio-ESP32-Learning-Kit-Complete-Edition-Raspberry-Pi/master/media/41abce34fdbca029fdea842bba8208c0.png" style="width:0.63194in;height:1.25972in" /><img src="https://raw.githubusercontent.com/keyestudio/KS5011-KS5011F-Keyestudio-ESP32-Learning-Kit-Complete-Edition-Raspberry-Pi/master/media/3567b7cbf98e20010044a1133bab78b7.png" style="width:1.72847in;height:1.02778in" /></td>
</tr>
<tr class="even">
<td>USB Cable*1</td>
<td>ESP32*1</td>
<td>Smart phone/Tablet *1</td>
</tr>
</tbody>
</table>

**3. Wiring Diagram**

Plug the ESP32 mainboard to the USB port of the Raspberry Pi

![](/media/56053f7126905c6def63919c661d5c0a.jpeg)

**4.Install APP**

Android system (Smartphone/Tablet) APP:

We provide the Android APP installation package：

![](/media/9932f96b4cbfe94b9f1895e8479ad068.png)

**Installation steps：**

Now transfer the **keyes wifi.apk** file in the folder to android phone
or tablet, and click **keyes wifi.apk** file to enter the installation
page, click“ALLOW”, then click“INSTALL”, after a while, click“OPEN”after
the installation is completed to enter the APP interface.

![](/media/d620452a9d6188cb3946269510df5ae0.png)

![](/media/b311329042f5bbd2880841127b91ebf8.png)

![](/media/7c5cfc935371c8e2ab30e999775d5f8f.png)

![](/media/d48c065ebaf1c5ca652eb72b15d3e596.png)

![](/media/78c89b91c0af2268f6267813e7923a9b.png)

IOS system (Smartphone/Tablet) APP:

a.Open App Store.

![](/media/27924fdb3d67692df7c63d8d0fb72287.png)

b. Enter keyes link in the search box and click Search, then the
download interface appears. Click“![](/media/962a57f92b78eea1f0e3e81463497a9c.png)”to download
and install the APP of keyes link. The following operations are similar
to those of Android system, you can refer to the steps of Android system
above for operation.

**5. Test Code**

<table>
<tbody>
<tr class="odd">
<td><p>// generated by KidsBlock</p>
<p>#include &lt;Arduino.h&gt;</p>
<p>#include &lt;WiFi.h&gt;</p>
<p>#include &lt;ESPmDNS.h&gt;</p>
<p>#include &lt;WiFiClient.h&gt;</p>
<p>String item = "0";</p>
<p>const char* ssid = "ChinaNet-2.4G-0DF0";</p>
<p>const char* password = "ChinaNet@233";</p>
<p>WiFiServer server(80);</p>
<p>void setup() </p>
<p>Serial.println("");</p>
<p>Serial.print("Connected to ");</p>
<p>Serial.println(ssid);</p>
<p>Serial.print("IP address: ");</p>
<p>Serial.println(WiFi.localIP());</p>
<p>server.begin();</p>
<p>Serial.println("TCP server started");</p>
<p>MDNS.addService("http", "tcp", 80);</p>
<p>}</p>
<p>void loop() </p>
<p>while(client.connected() &amp;&amp; !client.available())</p>
<p>String req = client.readStringUntil('\r');</p>
<p>int addr_start = req.indexOf(' ');</p>
<p>int addr_end = req.indexOf(' ', addr_start + 1);</p>
<p>if (addr_start == -1 || addr_end == -1) </p>
<p>req = req.substring(addr_start + 1, addr_end);</p>
<p>item=req;</p>
<p>Serial.println(item);</p>
<p>String s;</p>
<p>if (req == "/")</p>
<p></p>
<p>//client.print(s);</p>
<p>client.stop();</p>
<p>}</p></td>
</tr>
</tbody>
</table>

**Note:** You need to change the user's Wifi name and Wifi password in
the code![](/media/85551285d37d87fc8decadc09f968ec3.png)to your own Wifi name and Wifi password.

**6. Test Result**

After making sure that the code is modified correctly, compile and
upload the code to ESP32.（**Note:** If uploading the code fails, you can
press and hold the Boot button on ESP32 after
click![](/media/d09c4a31563f04a42d451e7bc1a5fb8a.png), and release the Boot
button![](/media/dc77bfcf5851c8f43aab6cbe7cec7920.png) after the percentage of uploading progress
appears），open the serial monitor and set baud rate to 115200.

In this way, the monitor prints the detected WiFi IP address, then open
the WiFi APP and enter the detected WiFi IP address in the text box in
front of the WiFi button (for example, the IP address detected by the
monitor is below :192.168.0.168), then click the WiFi button. “403
Forbidden”or“Webpage not available”will change to“192.168.0.168”, which
indicates that the APP is already connected to WiFi.

![](/media/ee42a1bde8dd1bc4cb554ccfef1ab9ae.png)

Click each function button on the APP by hand, and then the monitor will
print the corresponding characters received. (If open the serial monitor
and set the baud rate to 115200, the information is not displayed,
please press the RESET button of the ESP32)

![](/media/1fd21fafd84d2b529931a89d21a03d6a.png)。)

![](/media/73080da4456115468be4884618548513.png)
